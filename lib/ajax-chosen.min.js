(function(){var t;(t=jQuery).fn.ajaxChosen=function(e,n,a){var r,i,s,o;return null==e&&(e={}),null==a&&(a={}),i={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:"Keep typing...",lookingForMsg:"Looking for"},o=this,r=null,s=t.extend({},i,t(o).data(),e),this.chosen(a||{}),this.each(function(){return t(this).next(".chosen-container").find(".search-field > input, .chosen-search > input").bind("keyup",function(){var a,i,l,u;return l=t(this).val(),i=(u=t.trim(t(this).val())).length<s.minTermLength?s.keepTypingMsg:s.lookingForMsg+" '"+u+"'",o.next(".chosen-container").find(".no-results").text(i),u!==t(this).data("prevVal")&&(t(this).data("prevVal",u),this.timer&&clearTimeout(this.timer),!(u.length<s.minTermLength)&&(a=t(this),null==s.data&&(s.data={}),s.data[s.jsonTermKey]=u,null!=s.dataCallback&&(s.data=s.dataCallback(s.data)),s.success,s.success=function(r){var i,s,u;if(null!=r)return u=[],o.find("option").each(function(){return t(this).is(":selected")?u.push(t(this).val()+"-"+t(this).text()):t(this).remove()}),o.find("optgroup:empty").each(function(){return t(this).remove()}),i=null!=n?n(r,a):r,s=0,t.each(i,function(e,n){var a,r,i;return s++,n.group?((a=o.find("optgroup[label='"+n.text+"']")).size()||(a=t("<optgroup />")),a.attr("label",n.text).appendTo(o),t.each(n.items,function(e,n){var r,i;if("string"==typeof n?(i=e,r=n):(i=n.value,r=n.text),-1===t.inArray(i+"-"+r,u))return t("<option />").attr("value",i).html(r).appendTo(a)})):("string"==typeof n?(i=e,r=n):(i=n.value,r=n.text),-1===t.inArray(i+"-"+r,u)?t("<option />").attr("value",i).html(r).appendTo(o):void 0)}),s?o.trigger("chosen:updated"):(o.data().chosen.no_results_clear(),o.data().chosen.no_results(a.val())),null!=e.success&&e.success(r),a.val(l)},this.timer=setTimeout(function(){return r&&r.abort(),r=t.ajax(s)},s.afterTypeDelay)))})})}}).call(this);